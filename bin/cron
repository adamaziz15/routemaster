#!/usr/bin/env ruby

require_relative '../config/bootstrap.rb'
require 'rufus-scheduler'
require 'routemaster/services/monitor'
require 'routemaster/services/autodrop'

scheduler = Rufus::Scheduler.new
monitor = Routemaster::Services::Monitor.new
autodrop = Routemaster::Services::Autodrop.new

scheduler.every('30s', overlap: false, first_in: '5s') { autodrop.call }
scheduler.every('30s', overlap: false, first_in: '10s') { monitor.call }

scheduler.join
